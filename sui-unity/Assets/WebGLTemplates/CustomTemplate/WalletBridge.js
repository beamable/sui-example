var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{connectWallet:()=>et,disconnectWallet:()=>tt,loadWallets:()=>Xe,openWallet:()=>Ve,signMessage:()=>nt});var n;let s;const a=new Set,r={};function i(){if(s)return s;if(s=Object.freeze({register:o,get:u,on:l}),"undefined"==typeof window)return s;const e=Object.freeze({register:o});try{window.addEventListener("wallet-standard:register-wallet",(({detail:t})=>t(e)))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new h(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return s}function o(...e){return(e=e.filter((e=>!a.has(e)))).length?(e.forEach((e=>function(e){c=void 0,a.add(e)}(e))),r.register?.forEach((t=>d((()=>t(...e))))),function(){e.forEach((e=>function(e){c=void 0,a.delete(e)}(e))),r.unregister?.forEach((t=>d((()=>t(...e)))))}):()=>{}}let c;function u(){return c||(c=[...a]),c}function l(e,t){return r[e]?.push(t)||(r[e]=[t]),function(){r[e]=r[e]?.filter((e=>t!==e))}}function d(e){try{e()}catch(e){console.error(e)}}class h extends Event{get detail(){return function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)}(this,n,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),n.set(this,void 0),function(e,t,n,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===s?a.call(e,n):a?a.value=n:t.set(e,n)}(this,n,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}n=new WeakMap;const p="standard:connect",y="standard:disconnect",f=8192;function g(e){if(e.length<f)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=f){const s=e.slice(n,n+f);t+=String.fromCharCode(...s)}return btoa(t)}var M,w,m,v,N,b,j=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},I=function(e,t,n,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,n):a?a.value=n:t.set(e,n),n};class D{get address(){return j(this,M,"f")}get publicKey(){return j(this,w,"f").slice()}get chains(){return j(this,m,"f").slice()}get features(){return j(this,v,"f").slice()}get label(){return j(this,N,"f")}get icon(){return j(this,b,"f")}constructor(e){M.set(this,void 0),w.set(this,void 0),m.set(this,void 0),v.set(this,void 0),N.set(this,void 0),b.set(this,void 0),new.target===D&&Object.freeze(this),I(this,M,e.address,"f"),I(this,w,e.publicKey.slice(),"f"),I(this,m,e.chains.slice(),"f"),I(this,v,e.features.slice(),"f"),I(this,N,e.label,"f"),I(this,b,e.icon,"f")}}M=new WeakMap,w=new WeakMap,m=new WeakMap,v=new WeakMap,N=new WeakMap,b=new WeakMap;const E=["sui:devnet","sui:testnet","sui:localnet","sui:mainnet"];var z=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function k(e){return{lang:e?.lang??undefined,message:e?.message,abortEarly:e?.abortEarly??undefined,abortPipeEarly:e?.abortPipeEarly??undefined}}function T(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function A(e,t,n,s,a){const r=a&&"input"in a?a.input:n.value,i=a?.expected??e.expects??null,o=a?.received??T(r),c={kind:e.kind,type:e.type,input:r,expected:i,received:o,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:a?.path,issues:a?.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},u="schema"===e.kind,l=a?.message??e.message??(e.reference,void c.lang)??(u?void c.lang:null)??s.message??void c.lang;l&&(c.message="function"==typeof l?l(c):l),u&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}var x=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function O(e,t){return{kind:"schema",type:"literal",reference:O,expects:T(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:A(this,"type",e,t),e}}}function S(e){return{kind:"schema",type:"number",reference:S,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?A(this,"type",e,t):e.typed=!0,e}}}function W(e,t){return{kind:"schema",type:"object",reference:W,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const s in this.entries){const a=n[s],r=this.entries[s]._run({typed:!1,value:a},t);if(r.issues){const i={type:"object",origin:"value",input:n,key:s,value:a};for(const t of r.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=r.issues),t.abortEarly){e.typed=!1;break}}r.typed||(e.typed=!1),(void 0!==r.value||s in n)&&(e.value[s]=r.value)}}else A(this,"type",e,t);return e}}}function C(e){return{kind:"schema",type:"string",reference:C,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:A(this,"type",e,t),e}}}function L(e,t,n=new Set){for(const s of t)"variant"===s.type?L(e,s.options,n):n.add(s.entries[e].expects);return n}function U(e,t,n){let s;return{kind:"schema",type:"variant",reference:U,expects:"Object",async:!1,key:e,options:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){const a=n[this.key];if(this.key in n){let e;for(const s of this.options)if("variant"===s.type||!s.entries[this.key]._run({typed:!1,value:a},t).issues){const a=s._run({typed:!1,value:n},t);if(!a.issues)return a;(!e||!e.typed&&a.typed)&&(e=a)}if(e)return e}s||(s=[...L(this.key,this.options)].join(" | ")||"never"),A(this,"type",e,t,{input:a,expected:s,path:[{type:"object",origin:"value",input:n,key:this.key,value:a}]})}else A(this,"type",e,t);return e}}}function P(e,t,n){const s=e._run({typed:!1,value:t},k(n));if(s.issues)throw new x(s.issues);return s.value}new TextEncoder;const Q=new TextDecoder;class _ extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class Y extends _{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}function J(e){if("string"!=typeof e)throw new Y("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(5===n)throw new Y("Only JWTs using Compact JWS serialization can be decoded");if(3!==n)throw new Y("Invalid JWT");if(!t)throw new Y("JWTs must contain a payload");let s,a;try{s=function(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:Q.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=Q.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return function(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}(t)}catch{throw new Y("Failed to base64url decode the payload")}try{a=JSON.parse(Q.decode(s))}catch{throw new Y("Failed to parse the decoded payload as JSON")}if(!(e=>{if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n})(a))throw new Y("Invalid JWT Claims Set");return a}Symbol.asyncIterator;const R=W({address:C(),publicKey:C()}),B=W({exp:S(),iat:S(),iss:C(),aud:C(),payload:W({accounts:function e(t,n){return{kind:"schema",type:"array",reference:e,expects:"Array",async:!1,item:t,message:n,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let s=0;s<n.length;s++){const a=n[s],r=this.item._run({typed:!1,value:a},t);if(r.issues){const i={type:"array",origin:"value",input:n,key:s,value:a};for(const t of r.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=r.issues),t.abortEarly){e.typed=!1;break}}r.typed||(e.typed=!1),e.value.push(r.value)}}else A(this,"type",e,t);return e}}}(R)})}),Z=U("type",[W({type:O("connect"),session:C("`session` is required")}),W({type:O("sign-transaction"),bytes:C(),signature:C()}),W({type:O("sign-and-execute-transaction"),bytes:C(),signature:C(),digest:C(),effects:C()}),W({type:O("sign-personal-message"),bytes:C(),signature:C()})]),q=U("type",[W({type:O("reject"),reason:function e(t,...n){const s={kind:"schema",type:"optional",reference:e,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=function(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in n&&(s.default=n[0]),s}(C("`reason` must be a string"))}),W({type:O("resolve"),data:Z})]),$=W({id:function(...e){return{...e[0],pipe:e,_run(t,n){for(let s=0;s<e.length;s++){if(t.issues&&("schema"===e[s].kind||"transformation"===e[s].kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=e[s]._run(t,n))}return t}}}(C(),function e(t){return{kind:"validation",type:"uuid",reference:e,async:!1,expects:null,requirement:z,message:t,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&A(this,"UUID",e,t),e}}}()),source:O("web-wallet-channel"),payload:q,version:O("1")});var G,K,F,H,V,X,ee,te,ne,se,ae,re,ie,oe,ce,ue=e=>{throw TypeError(e)},le=(e,t,n)=>t.has(e)||ue("Cannot "+n),de=(e,t,n)=>(le(e,t,"read from private field"),n?n.call(e):t.get(e)),he=(e,t,n)=>t.has(e)?ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pe=(e,t,n,s)=>(le(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ye=(e,t,n)=>(le(e,t,"access private method"),n);class fe{constructor({appName:e,hostOrigin:t,hostPathname:n="dapp-request",extraRequestOptions:s}){he(this,oe),he(this,G),he(this,K,"1"),he(this,F),he(this,H),he(this,V),he(this,X),he(this,ee),he(this,te),he(this,ne),he(this,se),he(this,ae,null),he(this,re,!1),he(this,ie,(e=>{if(e.origin!==de(this,H))return;const{success:t,output:n}=function(e,t,n){const s=e._run({typed:!1,value:t},k(n));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}}($,e.data);t&&n.id===de(this,F)&&(ye(this,oe,ce).call(this),"reject"===n.payload.type?de(this,se).call(this,new Error("User rejected the request")):"resolve"===n.payload.type&&de(this,ne).call(this,n.payload.data))}));const a=window.open("about:blank","_blank");if(!a)throw new Error("Failed to open new window");pe(this,F,crypto.randomUUID()),pe(this,G,a),pe(this,H,t),pe(this,V,n),pe(this,X,e);const{promise:r,resolve:i,reject:o}=function(){let e,t;return{promise:new Promise(((n,s)=>{e=n,t=s})),resolve:e,reject:t}}();pe(this,te,r),pe(this,ne,i),pe(this,se,o),pe(this,ee,s),pe(this,ae,setInterval((()=>{try{de(this,G).closed&&(ye(this,oe,ce).call(this),o(new Error("User closed the wallet window")))}catch{}}),1e3))}send({type:e,...t}){if(de(this,G).closed)throw new Error("User closed the wallet window");if(de(this,re))throw new Error("send() can only be called once");pe(this,re,!0),window.addEventListener("message",de(this,ie));const n={version:de(this,K),requestId:de(this,F),appUrl:window.location.href.split("#")[0],appName:de(this,X),payload:{type:e,...t},metadata:{version:"1",originUrl:window.location.href,userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`,language:navigator.language,platform:navigator.platform,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timestamp:Date.now()},extraRequestOptions:de(this,ee)},s=encodeURIComponent(btoa(JSON.stringify(n)));return de(this,G).location.assign(`${de(this,H)}/${de(this,V)}#${s}`),de(this,te)}close(){ye(this,oe,ce).call(this),de(this,G).close()}}G=new WeakMap,K=new WeakMap,F=new WeakMap,H=new WeakMap,V=new WeakMap,X=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,se=new WeakMap,ae=new WeakMap,re=new WeakMap,ie=new WeakMap,oe=new WeakSet,ce=function(){de(this,ae)&&(clearInterval(de(this,ae)),pe(this,ae,null)),window.removeEventListener("message",de(this,ie))};var ge,Me,we,me,ve,Ne,be,je,Ie,De,Ee,ze,ke,Te,Ae,xe,Oe,Se=e=>{throw TypeError(e)},We=(e,t,n)=>t.has(e)||Se("Cannot "+n),Ce=(e,t,n)=>(We(e,t,"read from private field"),n?n.call(e):t.get(e)),Le=(e,t,n)=>t.has(e)?Se("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ue=(e,t,n,s)=>(We(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Pe=(e,t,n)=>(We(e,t,"access private method"),n);const Qe="slush:session",_e="Slush",Ye="com.mystenlabs.suiwallet",Je={id:"com.mystenlabs.suiwallet.web",walletName:"Slush",description:"Trade and earn on Sui.",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNENBMkZGIi8+CjxwYXRoIGQ9Ik0xMi4zNDczIDM0LjcyNTRDMTMuNTU1MyAzOS4yMzM2IDE4LjA2NzMgNDMuMzE0OCAyNy40MDI1IDQwLjgxMzRDMzYuMzA5NyAzOC40MjY3IDQxLjg5MjEgMzEuMDk5MyA0MC40NDQ2IDI1LjY5NzJDMzkuOTQ0NyAyMy44MzE3IDM4LjQzOTEgMjIuNTY4OSAzNi4xMTc4IDIyLjc3NDRMMTUuMzYxNSAyNC41MDM4QzE0LjA1NDQgMjQuNjA0MSAxMy40NTUgMjQuMzg5OCAxMy4xMDkyIDIzLjU2NjFDMTIuNzczOCAyMi43ODEyIDEyLjk2NDkgMjEuOTM4NSAxNC41NDM3IDIxLjE0MDZMMzAuMzM5NiAxMy4wMzQyQzMxLjU1MDMgMTIuNDE4MiAzMi4zNTY3IDEyLjE2MDUgMzMuMDkzNiAxMi40MjEzQzMzLjU1NTUgMTIuNTg5MSAzMy44NTk2IDEzLjI1NzQgMzMuNTgwMyAxNC4wODJMMzIuNTU2MSAxNy4xMDU2QzMxLjI5OTIgMjAuODE2NCAzMy45ODk5IDIxLjY3ODQgMzUuNTA2OCAyMS4yNzE5QzM3LjgwMTcgMjAuNjU3IDM4LjM0MTYgMTguNDcxMiAzNy42MDIzIDE1LjcxMTlDMzUuNzI3OCA4LjcxNjI5IDI4LjMwNTkgNy42MjI1NCAyMS41NzY4IDkuNDI1NTlDMTQuNzMxMSAxMS4yNTk5IDguNzk2ODEgMTYuODA3MiAxMC42MDg4IDIzLjU2OTZDMTEuMDM1OCAyNS4xNjMgMTIuNTAyNSAyNi40MzYyIDE0LjIwMTQgMjYuMzk3NUwxNi43OTUgMjYuMzkxMkMxNy4zMjg0IDI2LjM3ODggMTcuMTM2MyAyNi40MjI3IDE4LjE2NTMgMjYuMzM3NEMxOS4xOTQ0IDI2LjI1MjIgMjEuOTQyNSAyNS45MTQgMjEuOTQyNSAyNS45MTRMMzUuNDI3NSAyNC4zODhMMzUuNzc1IDI0LjMzNzVDMzYuNTYzNyAyNC4yMDMgMzcuMTU5NyAyNC40MDc5IDM3LjY2MzYgMjUuMjc2QzM4LjQxNzcgMjYuNTc1IDM3LjI2NzIgMjcuNTU0NiAzNS44ODk5IDI4LjcyNzJDMzUuODUzIDI4Ljc1ODYgMzUuODE2IDI4Ljc5MDEgMzUuNzc4OSAyOC44MjE4TDIzLjkyNSAzOS4wMzc3QzIxLjg5MzMgNDAuNzkwMSAyMC40NjYgNDAuMTMxMSAxOS45NjYyIDM4LjI2NTZMMTguMTk1OCAzMS42NTg3QzE3Ljc1ODUgMzAuMDI2NCAxNi4xNjQ2IDI4Ljc0NTYgMTQuMjk3NiAyOS4yNDU5QzExLjk2MzggMjkuODcxMiAxMS43NzQ2IDMyLjU4NzggMTIuMzQ3MyAzNC43MjU0WiIgZmlsbD0iIzA2MEQxNCIvPgo8L3N2Zz4K",enabled:!0},Re=W({id:C("Wallet ID is required"),walletName:C("Wallet name is required"),icon:C("Icon must be a valid wallet icon format"),enabled:function e(t){return{kind:"schema",type:"boolean",reference:e,expects:"boolean",async:!1,message:t,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:A(this,"type",e,t),e}}}("Enabled is required")});function Be(){const e=localStorage.getItem(Qe);if(!e)throw new Error("No session found");return e}const Ze=["sui:signTransaction","sui:signAndExecuteTransaction","sui:signPersonalMessage","sui:signTransactionBlock","sui:signAndExecuteTransactionBlock"];async function qe(e){const{payload:t}=await function(e){const t=J(e);return P(B,t)}(e);return t.accounts.map((e=>{return new D({address:e.address,chains:E,features:Ze,publicKey:(t=e.publicKey,Uint8Array.from(atob(t),(e=>e.charCodeAt(0))))});var t}))}class $e{constructor({name:e,origin:t,metadata:n}){var s;Le(this,ke),Le(this,ge),Le(this,Me),Le(this,we),Le(this,me),Le(this,ve),Le(this,Ne),Le(this,be),Le(this,je,(async({transactionBlock:e,account:t,chain:n})=>{const s=await e.toJSON(),a=Pe(this,ke,Oe).call(this),r=await a.send({type:"sign-transaction",transaction:s,address:t.address,chain:n,session:Be()});return{transactionBlockBytes:r.bytes,signature:r.signature}})),Le(this,Ie,(async({transaction:e,account:t,chain:n})=>{const s=Pe(this,ke,Oe).call(this),a=await e.toJSON(),r=await s.send({type:"sign-transaction",transaction:a,address:t.address,chain:n,session:Be()});return{bytes:r.bytes,signature:r.signature}})),Le(this,De,(async({transaction:e,account:t,chain:n})=>{const s=Pe(this,ke,Oe).call(this),a=await e.toJSON(),r=await s.send({type:"sign-and-execute-transaction",transaction:a,address:t.address,chain:n,session:Be()});return{bytes:r.bytes,signature:r.signature,digest:r.digest,effects:r.effects}})),Le(this,Ee,(async({message:e,account:t,chain:n})=>{const s=Pe(this,ke,Oe).call(this),a=await s.send({type:"sign-personal-message",message:g(e),address:t.address,chain:n??t.chains[0],session:Be()});return{bytes:a.bytes,signature:a.signature}})),Le(this,ze,((e,t)=>(Ce(this,Me).on(e,t),()=>Ce(this,Me).off(e,t)))),Le(this,Ae,(async e=>{if(e?.silent){try{const e=await qe(Be());e.length&&Pe(this,ke,Te).call(this,e)}catch(e){}return{accounts:this.accounts}}const t=Pe(this,ke,Oe).call(this),n=await t.send({type:"connect"});var s;return s=n.session,localStorage.setItem(Qe,s),Pe(this,ke,Te).call(this,await qe(n.session)),{accounts:this.accounts}})),Le(this,xe,(async()=>{localStorage.removeItem(Qe),Pe(this,ke,Te).call(this,[])})),Ue(this,ge,n.id),Ue(this,we,[]),Ue(this,Me,{all:s=s||new Map,on:function(e,t){var n=s.get(e);n?n.push(t):s.set(e,[t])},off:function(e,t){var n=s.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):s.set(e,[]))},emit:function(e,t){var n=s.get(e);n&&n.slice().map((function(e){e(t)})),(n=s.get("*"))&&n.slice().map((function(n){n(e,t)}))}}),Ue(this,me,t||"https://my.slush.app"),Ue(this,be,e),Ue(this,ve,n.walletName),Ue(this,Ne,n.icon)}get name(){return Ce(this,ve)}get id(){return Ce(this,ge)}get icon(){return Ce(this,Ne)}get version(){return"1.0.0"}get chains(){return E}get accounts(){return Ce(this,we)}get features(){return{"standard:connect":{version:"1.0.0",connect:Ce(this,Ae)},"standard:disconnect":{version:"1.0.0",disconnect:Ce(this,xe)},"standard:events":{version:"1.0.0",on:Ce(this,ze)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:Ce(this,je)},"sui:signTransaction":{version:"2.0.0",signTransaction:Ce(this,Ie)},"sui:signPersonalMessage":{version:"1.1.0",signPersonalMessage:Ce(this,Ee)},"sui:signAndExecuteTransaction":{version:"2.0.0",signAndExecuteTransaction:Ce(this,De)}}}updateMetadata(e){Ue(this,ge,e.id),Ue(this,ve,e.walletName),Ue(this,Ne,e.icon)}}ge=new WeakMap,Me=new WeakMap,we=new WeakMap,me=new WeakMap,ve=new WeakMap,Ne=new WeakMap,be=new WeakMap,je=new WeakMap,Ie=new WeakMap,De=new WeakMap,Ee=new WeakMap,ze=new WeakMap,ke=new WeakSet,Te=function(e){Ue(this,we,e),Ce(this,Me).emit("change",{accounts:this.accounts})},Ae=new WeakMap,xe=new WeakMap,Oe=function(){return new fe({appName:Ce(this,be),hostOrigin:Ce(this,me)})},function(e,{origin:t,metadataApiUrl:n="https://api.slush.app/api/wallet/metadata"}={}){const s=i();let a=null;if(s.on("register",(e=>{e.id===Ye&&a?.()})),s.get().find((e=>e.id===Ye)))return;const r=new $e({name:e,origin:t,metadata:Je});a=s.register(r),async function(e){const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch wallet metadata");const n=await t.json();return P(Re,n)}(n).then((e=>{if(!e.enabled)return console.log("Slush wallet is not currently enabled."),void a?.();r.updateMetadata(e)})).catch((e=>{console.error("Error fetching metadata",e)}))}("Beam Stashed");let Ge,Ke=[];async function Fe(){return 0===Ke.length&&(Ke=await async function(){return Array.from(i().get())}()),Ke}async function He(e){return(await Fe()).find((t=>t.name===e))}async function Ve(e){try{const t=(await He(e)).features[p];await t.connect(),e==_e&&window.open("https://my.slush.app","_blank")}catch(e){console.error("Connection failed:",e)}}async function Xe(){try{return(await Fe()).map((e=>e.name))}catch(e){return console.error("Error loading wallets:",e),[]}}async function et(e){try{const t=await async function(e){return null==Ge&&(Ge=await async function(e){try{const t=(await He(e)).features[p],n=await t.connect();return Ge=n.accounts[0],Ge}catch(e){console.error("Connection failed:",e)}}(e)),Ge}(e);return t?.address??""}catch(e){return console.error("Connection failed:",e),""}}async function tt(e){try{const t=await He(e);if(null==t)return;const n=t.features[y];await n.disconnect(),Ge=void 0,Ke=[]}catch(e){return void console.error("Disconnect failed:",e)}}async function nt(e,t){if(!t)return"";const n=await He(e);if(null==n)return"";try{const e=n.features[p],s=await e.connect(),a=n.features["sui:signPersonalMessage"];return(await a.signPersonalMessage({message:(new TextEncoder).encode(t),account:s.accounts[0]})).signature}catch(e){return console.error("Signing failed:",e),""}}window.WalletBridge=t;