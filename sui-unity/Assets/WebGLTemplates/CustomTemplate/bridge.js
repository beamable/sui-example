var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{connectWallet:()=>zi,disconnectWallet:()=>Di,loadWallets:()=>Pi,signMessage:()=>Ni});var n;let r;const i=new Set,s={};function a(){if(r)return r;if(r=Object.freeze({register:o,get:c,on:l}),"undefined"==typeof window)return r;const e=Object.freeze({register:o});try{window.addEventListener("wallet-standard:register-wallet",(({detail:t})=>t(e)))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new p(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return r}function o(...e){return(e=e.filter((e=>!i.has(e)))).length?(e.forEach((e=>function(e){u=void 0,i.add(e)}(e))),s.register?.forEach((t=>d((()=>t(...e))))),function(){e.forEach((e=>function(e){u=void 0,i.delete(e)}(e))),s.unregister?.forEach((t=>d((()=>t(...e)))))}):()=>{}}let u;function c(){return u||(u=[...i]),u}function l(e,t){return s[e]?.push(t)||(s[e]=[t]),function(){s[e]=s[e]?.filter((e=>t!==e))}}function d(e){try{e()}catch(e){console.error(e)}}class p extends Event{get detail(){return function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}(this,n,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),n.set(this,void 0),function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(e,n):i?i.value=n:t.set(e,n)}(this,n,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}n=new WeakMap;const h="standard:connect",f="standard:disconnect";function g(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}const y=8192;function m(e){if(e.length<y)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=y){const r=e.slice(n,n+y);t+=String.fromCharCode(...r)}return btoa(t)}const b=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let n=0;n<e.length;n++){const r=e.charAt(n),i=r.charCodeAt(0);if(255!==t[i])throw new TypeError(r+" is ambiguous");t[i]=n}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function a(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,a=0,o=0;for(;e[s]===r;)a++,s++;const u=(e.length-s)*i+1>>>0,c=new Uint8Array(u);for(;e[s];){let r=t[e.charCodeAt(s)];if(255===r)return;let i=0;for(let e=u-1;(0!==r||i<o)&&-1!==e;e--,i++)r+=n*c[e]>>>0,c[e]=r%256>>>0,r=r/256>>>0;if(0!==r)throw new Error("Non-zero carry");o=i,s++}let l=u-o;for(;l!==u&&0===c[l];)l++;const d=new Uint8Array(a+(u-l));let p=a;for(;l!==u;)d[p++]=c[l++];return d}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,a=0,o=0;const u=t.length;for(;o!==u&&0===t[o];)o++,i++;const c=(u-o)*s+1>>>0,l=new Uint8Array(c);for(;o!==u;){let e=t[o],r=0;for(let t=c-1;(0!==e||r<a)&&-1!==t;t--,r++)e+=256*l[t]>>>0,l[t]=e%n>>>0,e=e/n>>>0;if(0!==e)throw new Error("Non-zero carry");a=r,o++}let d=c-a;for(;d!==c&&0===l[d];)d++;let p=r.repeat(i);for(;d<c;++d)p+=e.charAt(l[d]);return p},decodeUnsafe:a,decode:function(e){const t=a(e);if(t)return t;throw new Error("Non-base"+n+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),w=e=>b.encode(e),v=e=>b.decode(e);function j(e){const t=e.startsWith("0x")?e.slice(2):e,n=t.length%2==0?t:`0${t}`,r=n.match(/[0-9a-fA-F]{2}/g)?.map((e=>parseInt(e,16)))??[];if(r.length!==n.length/2)throw new Error(`Invalid hex string ${e}`);return Uint8Array.from(r)}function k(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function S(e){let t=[],n=0;if(0===e)return[0];for(;e>0;)t[n]=127&e,(e>>=7)&&(t[n]|=128),n+=1;return t}class M{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:n,length:r}=function(e){let t=0,n=0,r=0;for(;;){let i=e[r];if(r+=1,t|=(127&i)<<n,!(128&i))break;n+=7}return{value:t,length:r}}(t);return this.shift(r),n}readVec(e){let t=this.readULEB(),n=[];for(let r=0;r<t;r++)n.push(e(this,r,t));return n}}class O{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const n=new ArrayBuffer(this.size);new Uint8Array(n).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(n)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return I(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return I(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return I(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return S(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((n,r)=>t(this,n,r,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function(e,t){switch(t){case"base58":return w(e);case"base64":return m(e);case"hex":return k(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}}function I(e,t){let n=new Uint8Array(t),r=0;for(;e>0;)n[r]=Number(e%BigInt(256)),e/=BigInt(256),r+=1;return n}var E,x,U,C,T=e=>{throw TypeError(e)},A=(e,t,n)=>t.has(e)||T("Cannot "+n),P=(e,t,n)=>(A(e,t,"read from private field"),n?n.call(e):t.get(e)),z=(e,t,n)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),D=(e,t,n,r)=>(A(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);E=new WeakMap,x=new WeakMap;let N=class e{constructor(e){z(this,E),z(this,x),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),D(this,E,e.write),D(this,x,e.serialize??((e,t)=>{const n=new O({initialSize:this.serializedSize(e)??void 0,...t});return P(this,E).call(this,e,n),n.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),P(this,E).call(this,e,t)}serialize(e,t){return this.validate(e),new L(this,P(this,x).call(this,e,t))}parse(e){const t=new M(e);return this.read(t)}fromHex(e){return this.parse(j(e))}fromBase58(e){return this.parse(v(e))}fromBase64(e){return this.parse(g(e))}transform({name:t,input:n,output:r,validate:i}){return new e({name:t??this.name,read:e=>r?r(this.read(e)):this.read(e),write:(e,t)=>P(this,E).call(this,n?n(e):e,t),serializedSize:e=>this.serializedSize(n?n(e):e),serialize:(e,t)=>P(this,x).call(this,n?n(e):e,t),validate:e=>{i?.(e),this.validate(n?n(e):e)}})}};const $=Symbol.for("@mysten/serialized-bcs");function B(e){return!!e&&"object"==typeof e&&!0===e[$]}class L{constructor(e,t){z(this,U),z(this,C),D(this,U,e),D(this,C,t)}get[$](){return!0}toBytes(){return P(this,C)}toHex(){return k(P(this,C))}toBase64(){return m(P(this,C))}toBase58(){return w(P(this,C))}parse(){return P(this,U).parse(P(this,C))}}function V({size:e,...t}){return new N({...t,serializedSize:()=>e})}function R({readMethod:e,writeMethod:t,...n}){return V({...n,read:t=>t[e](),write:(e,n)=>n[t](e),validate:e=>{if(e<0||e>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected value in range 0-${n.maxValue}`);n.validate?.(e)}})}function W({readMethod:e,writeMethod:t,...n}){return V({...n,read:t=>t[e](),write:(e,n)=>n[t](BigInt(e)),validate:e=>{const t=BigInt(e);if(t<0||t>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${t}. Expected value in range 0-${n.maxValue}`);n.validate?.(t)}})}U=new WeakMap,C=new WeakMap;var _=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function G(e){return{lang:e?.lang??undefined,message:e?.message,abortEarly:e?.abortEarly??undefined,abortPipeEarly:e?.abortPipeEarly??undefined}}function F(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function H(e,t,n,r,i){const s=i&&"input"in i?i.input:n.value,a=i?.expected??e.expects??null,o=i?.received??F(s),u={kind:e.kind,type:e.type,input:s,expected:a,received:o,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c="schema"===e.kind,l=i?.message??e.message??(e.reference,void u.lang)??(c?void u.lang:null)??r.message??void u.lang;l&&(u.message="function"==typeof l?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function K(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}var Q=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function q(e,t){return{kind:"validation",type:"check",reference:q,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&H(this,"input",e,t),e}}}function J(e){return{kind:"validation",type:"integer",reference:J,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&H(this,"integer",e,t),e}}}function Y(e){return{kind:"transformation",type:"transform",reference:Y,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function Z(e){return{kind:"validation",type:"uuid",reference:Z,async:!1,expects:null,requirement:_,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&H(this,"UUID",e,t),e}}}function X(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function ee(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function te(e,t){return{kind:"schema",type:"array",reference:te,expects:"Array",async:!1,item:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let r=0;r<n.length;r++){const i=n[r],s=this.item._run({typed:!1,value:i},t);if(s.issues){const a={type:"array",origin:"value",input:n,key:r,value:i};for(const t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else H(this,"type",e,t);return e}}}function ne(e){return{kind:"schema",type:"bigint",reference:ne,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:H(this,"type",e,t),e}}}function re(e){return{kind:"schema",type:"boolean",reference:re,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:H(this,"type",e,t),e}}}function ie(e){return{kind:"schema",type:"lazy",reference:ie,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function se(e,t){return{kind:"schema",type:"literal",reference:se,expects:F(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:H(this,"type",e,t),e}}}function ae(e,...t){const n={kind:"schema",type:"nullable",reference:ae,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=X(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function oe(e,...t){const n={kind:"schema",type:"nullish",reference:oe,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(e,t){return null!==e.value&&void 0!==e.value||("default"in this&&(e.value=X(this,e,t)),null!==e.value&&void 0!==e.value)?this.wrapped._run(e,t):(e.typed=!0,e)}};return 0 in t&&(n.default=t[0]),n}function ue(e){return{kind:"schema",type:"number",reference:ue,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?H(this,"type",e,t):e.typed=!0,e}}}function ce(e,t){return{kind:"schema",type:"object",reference:ce,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const r in this.entries){const i=n[r],s=this.entries[r]._run({typed:!1,value:i},t);if(s.issues){const a={type:"object",origin:"value",input:n,key:r,value:i};for(const t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||r in n)&&(e.value[r]=s.value)}}else H(this,"type",e,t);return e}}}function le(e,...t){const n={kind:"schema",type:"optional",reference:le,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=X(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function de(e,t,n){return{kind:"schema",type:"record",reference:de,expects:"Object",async:!1,key:e,value:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const r in n)if(K(n,r)){const i=n[r],s=this.key._run({typed:!1,value:r},t);if(s.issues){const a={type:"object",origin:"key",input:n,key:r,value:i};for(const t of s.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}const a=this.value._run({typed:!1,value:i},t);if(a.issues){const s={type:"object",origin:"value",input:n,key:r,value:i};for(const t of a.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}s.typed&&a.typed||(e.typed=!1),s.typed&&(e.value[s.value]=a.value)}}else H(this,"type",e,t);return e}}}function pe(e){return{kind:"schema",type:"string",reference:pe,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:H(this,"type",e,t),e}}}function he(e,t){return{kind:"schema",type:"tuple",reference:he,expects:"Array",async:!1,items:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let r=0;r<this.items.length;r++){const i=n[r],s=this.items[r]._run({typed:!1,value:i},t);if(s.issues){const a={type:"array",origin:"value",input:n,key:r,value:i};for(const t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else H(this,"type",e,t);return e}}}function fe(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function ge(e,t){return{kind:"schema",type:"union",reference:ge,expects:[...new Set(e.map((e=>e.expects)))].join(" | ")||"never",async:!1,options:e,message:t,_run(e,t){let n,r,i;for(const s of this.options){const a=s._run({typed:!1,value:e.value},t);if(a.typed){if(!a.issues){n=a;break}r?r.push(a):r=[a]}else i?i.push(a):i=[a]}if(n)return n;if(r){if(1===r.length)return r[0];H(this,"type",e,t,{issues:fe(r)}),e.typed=!0}else{if(1===i?.length)return i[0];H(this,"type",e,t,{issues:fe(i)})}return e}}}function ye(){return{kind:"schema",type:"unknown",reference:ye,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function me(e,t,n=new Set){for(const r of t)"variant"===r.type?me(e,r.options,n):n.add(r.entries[e].expects);return n}function be(e,t,n){let r;return{kind:"schema",type:"variant",reference:be,expects:"Object",async:!1,key:e,options:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){const i=n[this.key];if(this.key in n){let e;for(const r of this.options)if("variant"===r.type||!r.entries[this.key]._run({typed:!1,value:i},t).issues){const i=r._run({typed:!1,value:n},t);if(!i.issues)return i;(!e||!e.typed&&i.typed)&&(e=i)}if(e)return e}r||(r=[...me(this.key,this.options)].join(" | ")||"never"),H(this,"type",e,t,{input:i,expected:r,path:[{type:"object",origin:"value",input:n,key:this.key,value:i}]})}else H(this,"type",e,t);return e}}}function we(e,t,n){const r=e._run({typed:!1,value:t},G(n));if(r.issues)throw new Q(r.issues);return r.value}function ve(...e){return{...e[0],pipe:e,_run(t,n){for(let r=0;r<e.length;r++){if(t.issues&&("schema"===e[r].kind||"transformation"===e[r].kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=e[r]._run(t,n))}return t}}}function je(e){return function(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&32===function(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)}function ke(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(64,"0")}`}function Se(e,t=!1){return ke(e,t)}function Me(e){return ve(ge(Object.entries(e).map((([e,t])=>ce({[e]:t})))),Y((e=>({...e,$kind:Object.keys(e)[0]}))))}const Oe=ve(pe(),Y((e=>ke(e))),q(je)),Ie=Oe,Ee=pe(),xe=ve(ge([pe(),ve(ue(),J())]),q((e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}}),"Invalid u64")),Ue=ce({objectId:Oe,version:xe,digest:pe()}),Ce=ve(ge([ce({GasCoin:se(!0)}),ce({Input:ve(ue(),J()),type:le(se("pure"))}),ce({Input:ve(ue(),J()),type:le(se("object"))}),ce({Result:ve(ue(),J())}),ce({NestedResult:he([ve(ue(),J()),ve(ue(),J())])})]),Y((e=>({...e,$kind:Object.keys(e)[0]})))),Te=ce({budget:ae(xe),price:ae(xe),owner:ae(Oe),payment:ae(te(Ue))}),Ae=(ce({address:pe(),module:pe(),name:pe(),typeParams:te(pe())}),ge([se("address"),se("bool"),se("u8"),se("u16"),se("u32"),se("u64"),se("u128"),se("u256"),ce({vector:ie((()=>Ae))}),ce({datatype:ce({package:pe(),module:pe(),type:pe(),typeParameters:te(ie((()=>Ae)))})}),ce({typeParameter:ve(ue(),J())})])),Pe=ce({ref:ae(ge([se("&"),se("&mut")])),body:Ae}),ze=ce({package:Ie,module:pe(),function:pe(),typeArguments:te(pe()),arguments:te(Ce),_argumentTypes:le(ae(te(Pe)))}),De=ce({name:pe(),inputs:de(pe(),ge([Ce,te(Ce)])),data:de(pe(),ye())}),Ne=Me({MoveCall:ze,TransferObjects:ce({objects:te(Ce),address:Ce}),SplitCoins:ce({coin:Ce,amounts:te(Ce)}),MergeCoins:ce({destination:Ce,sources:te(Ce)}),Publish:ce({modules:te(Ee),dependencies:te(Ie)}),MakeMoveVec:ce({type:ae(pe()),elements:te(Ce)}),Upgrade:ce({modules:te(Ee),dependencies:te(Ie),package:Ie,ticket:Ce}),$Intent:De}),$e=Me({ImmOrOwnedObject:Ue,SharedObject:ce({objectId:Ie,initialSharedVersion:xe,mutable:re()}),Receiving:Ue}),Be=Me({Object:$e,Pure:ce({bytes:Ee}),UnresolvedPure:ce({value:ye()}),UnresolvedObject:ce({objectId:Ie,version:le(ae(xe)),digest:le(ae(pe())),initialSharedVersion:le(ae(xe))})}),Le=Me({Object:$e,Pure:ce({bytes:Ee})}),Ve=Me({None:se(!0),Epoch:xe}),Re=ce({version:se(2),sender:oe(Oe),expiration:oe(Ve),gasData:Te,inputs:te(Be),commands:te(Ne)}),We={MoveCall(e){const[t,n="",r=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:n,function:r,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map((e=>we(Ce,e))),address:we(Ce,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:we(Ce,e),amounts:t.map((e=>we(Ce,e)))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:we(Ce,e),sources:t.map((e=>we(Ce,e)))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map((e=>"string"==typeof e?e:m(new Uint8Array(e)))),dependencies:t.map((e=>Se(e)))}}),Upgrade:({modules:e,dependencies:t,package:n,ticket:r})=>({$kind:"Upgrade",Upgrade:{modules:e.map((e=>"string"==typeof e?e:m(new Uint8Array(e)))),dependencies:t.map((e=>Se(e))),package:n,ticket:we(Ce,r)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map((e=>we(Ce,e)))}}),Intent:({name:e,inputs:t={},data:n={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map((([e,t])=>[e,Array.isArray(t)?t.map((e=>we(Ce,e))):we(Ce,t)]))),data:n}})},_e=/^vector<(.+)>$/,Ge=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Fe{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const n=e.match(_e);if(n)return{vector:Fe.parseFromStr(n[1],t)};const r=e.match(Ge);if(r)return{struct:{address:t?ke(r[1]):r[1],module:r[2],name:r[3],typeParams:void 0===r[5]?[]:Fe.parseStructTypeArgs(r[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return function(e,t=["<",">"]){const[n,r]=t,i=[];let s="",a=0;for(let t=0;t<e.length;t++){const o=e[t];o===n&&a++,o===r&&a--,0!==a||","!==o?s+=o:(i.push(s.trim()),s="")}return i.push(s.trim()),i}(e).map((e=>Fe.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Fe.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,n=t.typeParams.map(Fe.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}const He=ce({digest:pe(),objectId:pe(),version:ge([ve(ue(),J()),pe(),ne()])}),Ke=Me({ImmOrOwned:He,Shared:ce({objectId:Ie,initialSharedVersion:xe,mutable:re()}),Receiving:He}),Qe=Me({Object:Ke,Pure:te(ve(ue(),J()))}),qe=ge([ce({kind:se("Input"),index:ve(ue(),J()),value:ye(),type:le(se("object"))}),ce({kind:se("Input"),index:ve(ue(),J()),value:ye(),type:se("pure")})]),Je=ge([ce({Epoch:ve(ue(),J())}),ce({None:ae(se(!0))})]),Ye=ve(ge([ue(),pe(),ne()]),q((e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}))),Ze=ge([ce({bool:ae(se(!0))}),ce({u8:ae(se(!0))}),ce({u64:ae(se(!0))}),ce({u128:ae(se(!0))}),ce({address:ae(se(!0))}),ce({signer:ae(se(!0))}),ce({vector:ie((()=>Ze))}),ce({struct:ie((()=>Xe))}),ce({u16:ae(se(!0))}),ce({u32:ae(se(!0))}),ce({u256:ae(se(!0))})]),Xe=ce({address:pe(),module:pe(),name:pe(),typeParams:te(Ze)}),et=ce({budget:le(Ye),price:le(Ye),payment:le(te(He)),owner:le(pe())}),tt=ge([qe,ce({kind:se("GasCoin")}),ce({kind:se("Result"),index:ve(ue(),J())}),ce({kind:se("NestedResult"),index:ve(ue(),J()),resultIndex:ve(ue(),J())})]),nt=ce({kind:se("MoveCall"),target:ve(pe(),q((e=>3===e.split("::").length))),typeArguments:te(pe()),arguments:te(tt)}),rt=ce({kind:se("TransferObjects"),objects:te(tt),address:tt}),it=ce({kind:se("SplitCoins"),coin:tt,amounts:te(tt)}),st=ce({kind:se("MergeCoins"),destination:tt,sources:te(tt)}),at=ce({kind:se("MakeMoveVec"),type:ge([ce({Some:Ze}),ce({None:ae(se(!0))})]),objects:te(tt)}),ot=ge([nt,rt,it,st,ce({kind:se("Publish"),modules:te(te(ve(ue(),J()))),dependencies:te(pe())}),ce({kind:se("Upgrade"),modules:te(te(ve(ue(),J()))),dependencies:te(pe()),packageId:pe(),ticket:tt}),at]);function ut(e){const t=e.inputs.map(((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from(g(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw new Error("Invalid input")}));return{version:1,sender:e.sender??void 0,expiration:"Epoch"===e.expiration?.$kind?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map((e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:Fe.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map((e=>ct(e,t)))};if(e.MergeCoins)return{kind:"MergeCoins",destination:ct(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map((e=>ct(e,t)))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map((e=>ct(e,t)))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map((e=>Array.from(g(e)))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:ct(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map((e=>ct(e,t)))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map((e=>ct(e,t))),address:ct(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map((e=>Array.from(g(e)))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:ct(e.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(e)}`)}))}}function ct(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function lt(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function dt(e){return ge(Object.entries(e).map((([e,t])=>ce({[e]:t}))))}ce({version:se(1),sender:le(pe()),expiration:oe(Je),gasConfig:et,inputs:te(qe),transactions:te(ot)});const pt=dt({GasCoin:se(!0),Input:ve(ue(),J()),Result:ve(ue(),J()),NestedResult:he([ve(ue(),J()),ve(ue(),J())])}),ht=ce({budget:ae(xe),price:ae(xe),owner:ae(Oe),payment:ae(te(Ue))}),ft=ce({package:Ie,module:pe(),function:pe(),typeArguments:te(pe()),arguments:te(pt)}),gt=ce({name:pe(),inputs:de(pe(),ge([pt,te(pt)])),data:de(pe(),ye())}),yt=dt({MoveCall:ft,TransferObjects:ce({objects:te(pt),address:pt}),SplitCoins:ce({coin:pt,amounts:te(pt)}),MergeCoins:ce({destination:pt,sources:te(pt)}),Publish:ce({modules:te(Ee),dependencies:te(Ie)}),MakeMoveVec:ce({type:ae(pe()),elements:te(pt)}),Upgrade:ce({modules:te(Ee),dependencies:te(Ie),package:Ie,ticket:pt}),$Intent:gt}),mt=dt({ImmOrOwnedObject:Ue,SharedObject:ce({objectId:Ie,initialSharedVersion:xe,mutable:re()}),Receiving:Ue}),bt=dt({Object:mt,Pure:ce({bytes:Ee}),UnresolvedPure:ce({value:ye()}),UnresolvedObject:ce({objectId:Ie,version:le(ae(xe)),digest:le(ae(pe())),initialSharedVersion:le(ae(xe))})}),wt=dt({None:se(!0),Epoch:xe}),vt=ce({version:se(2),sender:oe(Oe),expiration:oe(wt),gasData:ht,inputs:te(bt),commands:te(yt)}),jt=function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?m(e):e.toBase64()}}},kt=({objectId:e,digest:t,version:n})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:n,objectId:ke(e)}}}),St=({objectId:e,mutable:t,initialSharedVersion:n})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:n,objectId:ke(e)}}}),Mt=({objectId:e,digest:t,version:n})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:n,objectId:ke(e)}}}),Ot={u8:e=>R({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e}),u16:e=>R({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e}),u32:e=>R({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e}),u64:e=>W({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e}),u128:e=>W({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e}),u256:e=>W({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e}),bool:e=>V({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>function({serialize:e,...t}){const n=new N({...t,serialize:e,write:(e,t)=>{for(const r of n.serialize(e).toBytes())t.write8(r)}});return n}({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(S(e)),...e}),bytes:(e,t)=>V({name:`bytes[${e}]`,size:e,read:t=>t.readBytes(e),write:(t,n)=>{const r=new Uint8Array(t);for(let t=0;t<e;t++)n.write8(r[t]??0)},...t,validate:n=>{if(t?.validate?.(n),!n||"object"!=typeof n||!("length"in n))throw new TypeError("Expected array, found "+typeof n);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}}),byteVector:e=>new N({name:"bytesVector",read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const n=new Uint8Array(e);t.writeULEB(n.length);for(let e=0;e<n.length;e++)t.write8(n[e]??0)},...e,serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:S(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),string:e=>function({toBytes:e,fromBytes:t,...n}){return new N({...n,read:e=>{const n=e.readULEB(),r=e.readBytes(n);return t(r)},write:(t,n)=>{const r=e(t);n.writeULEB(r.length);for(let e=0;e<r.length;e++)n.write8(r[e])},serialize:t=>{const n=e(t),r=S(n.length),i=new Uint8Array(r.length+n.length);return i.set(r,0),i.set(n,r.length),i},validate:e=>{if("string"!=typeof e)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected string`);n.validate?.(e)}})}({name:"string",toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e}),fixedArray:(e,t,n)=>new N({name:`${t.name}[${e}]`,read:n=>{const r=new Array(e);for(let i=0;i<e;i++)r[i]=t.read(n);return r},write:(e,n)=>{for(const r of e)t.write(r,n)},...n,validate:t=>{if(n?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}}),option:e=>Ot.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null}),vector:(e,t)=>new N({name:`vector<${e.name}>`,read:t=>{const n=t.readULEB(),r=new Array(n);for(let i=0;i<n;i++)r[i]=e.read(t);return r},write:(t,n)=>{n.writeULEB(t.length);for(const r of t)e.write(r,n)},...t,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e)}}),tuple:(e,t)=>new N({name:`(${e.map((e=>e.name)).join(", ")})`,serializedSize:t=>{let n=0;for(let r=0;r<e.length;r++){const i=e[r].serializedSize(t[r]);if(null==i)return null;n+=i}return n},read:t=>{const n=[];for(const r of e)n.push(r.read(t));return n},write:(t,n)=>{for(let r=0;r<e.length;r++)e[r].write(t[r],n)},...t,validate:n=>{if(t?.validate?.(n),!Array.isArray(n))throw new TypeError("Expected array, found "+typeof n);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}}),struct(e,t,n){const r=Object.entries(t);return new N({name:e,serializedSize:e=>{let t=0;for(const[n,i]of r){const r=i.serializedSize(e[n]);if(null==r)return null;t+=r}return t},read:e=>{const t={};for(const[n,i]of r)t[n]=i.read(e);return t},write:(e,t)=>{for(const[n,i]of r)i.write(e[n],t)},...n,validate:e=>{if(n?.validate?.(e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})},enum(e,t,n){const r=Object.entries(t);return new N({name:e,read:t=>{const n=t.readULEB(),i=r[n];if(!i)throw new TypeError(`Unknown value ${n} for enum ${e}`);const[s,a]=i;return{[s]:a?.read(t)??!0,$kind:s}},write:(e,n)=>{const[i,s]=Object.entries(e).filter((([e])=>Object.hasOwn(t,e)))[0];for(let e=0;e<r.length;e++){const[t,a]=r[e];if(t===i)return n.writeULEB(e),void a?.write(s,n)}},...n,validate:r=>{if(n?.validate?.(r),"object"!=typeof r||null==r)throw new TypeError("Expected object, found "+typeof r);const i=Object.keys(r).filter((e=>void 0!==r[e]&&Object.hasOwn(t,e)));if(1!==i.length)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${e}}`);const[s]=i;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map:(e,t)=>Ot.vector(Ot.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[n,r]of e)t.set(n,r);return t}}),lazy:e=>function(e){let t=null;function n(){return t||(t=e()),t}return new N({name:"lazy",read:e=>n().read(e),serializedSize:e=>n().serializedSize(e),write:(e,t)=>n().write(e,t),serialize:(e,t)=>n().serialize(e,t).toBytes()})}(e)},It=Ot.bytes(32).transform({validate:e=>{const t="string"==typeof e?e:k(e);if(!t||!je(ke(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?j(ke(e)):e,output:e=>ke(k(e))}),Et=Ot.vector(Ot.u8()).transform({name:"ObjectDigest",input:e=>v(e),output:e=>w(new Uint8Array(e)),validate:e=>{if(32!==v(e).length)throw new Error("ObjectDigest must be 32 bytes")}}),xt=Ot.struct("SuiObjectRef",{objectId:It,version:Ot.u64(),digest:Et}),Ut=Ot.struct("SharedObjectRef",{objectId:It,initialSharedVersion:Ot.u64(),mutable:Ot.bool()}),Ct=Ot.enum("ObjectArg",{ImmOrOwnedObject:xt,SharedObject:Ut,Receiving:xt}),Tt=Ot.enum("CallArg",{Pure:Ot.struct("Pure",{bytes:Ot.vector(Ot.u8()).transform({input:e=>"string"==typeof e?g(e):e,output:e=>m(new Uint8Array(e))})}),Object:Ct}),At=Ot.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:Ot.lazy((()=>At)),struct:Ot.lazy((()=>Rt)),u16:null,u32:null,u256:null}),Pt=At.transform({input:e=>"string"==typeof e?Fe.parseFromStr(e,!0):e,output:e=>Fe.tagToString(e)}),zt=Ot.enum("Argument",{GasCoin:null,Input:Ot.u16(),Result:Ot.u16(),NestedResult:Ot.tuple([Ot.u16(),Ot.u16()])}),Dt=Ot.struct("ProgrammableMoveCall",{package:It,module:Ot.string(),function:Ot.string(),typeArguments:Ot.vector(Pt),arguments:Ot.vector(zt)}),Nt=Ot.enum("Command",{MoveCall:Dt,TransferObjects:Ot.struct("TransferObjects",{objects:Ot.vector(zt),address:zt}),SplitCoins:Ot.struct("SplitCoins",{coin:zt,amounts:Ot.vector(zt)}),MergeCoins:Ot.struct("MergeCoins",{destination:zt,sources:Ot.vector(zt)}),Publish:Ot.struct("Publish",{modules:Ot.vector(Ot.vector(Ot.u8()).transform({input:e=>"string"==typeof e?g(e):e,output:e=>m(new Uint8Array(e))})),dependencies:Ot.vector(It)}),MakeMoveVec:Ot.struct("MakeMoveVec",{type:($t=Pt,Ot.enum("Option",{None:null,Some:$t})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:Ot.vector(zt)}),Upgrade:Ot.struct("Upgrade",{modules:Ot.vector(Ot.vector(Ot.u8()).transform({input:e=>"string"==typeof e?g(e):e,output:e=>m(new Uint8Array(e))})),dependencies:Ot.vector(It),package:It,ticket:zt})});var $t;const Bt=Ot.struct("ProgrammableTransaction",{inputs:Ot.vector(Tt),commands:Ot.vector(Nt)}),Lt=Ot.enum("TransactionKind",{ProgrammableTransaction:Bt,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Vt=Ot.enum("TransactionExpiration",{None:null,Epoch:Ot.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})});const Rt=Ot.struct("StructTag",{address:It,module:Ot.string(),name:Ot.string(),typeParams:Ot.vector(At)}),Wt=Ot.struct("GasData",{payment:Ot.vector(xt),owner:It,price:Ot.u64(),budget:Ot.u64()}),_t=Ot.struct("TransactionDataV1",{kind:Lt,sender:It,gasData:Wt,expiration:Vt}),Gt=Ot.enum("TransactionData",{V1:_t}),Ft=Ot.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ht=Ot.enum("IntentVersion",{V0:null}),Kt=Ot.enum("AppId",{Sui:null}),Qt=Ot.struct("Intent",{scope:Ft,version:Ht,appId:Kt});function qt(e){return Ot.struct(`IntentMessage<${e.name}>`,{intent:Qt,value:e})}const Jt=Ot.enum("CompressedSignature",{ED25519:Ot.fixedArray(64,Ot.u8()),Secp256k1:Ot.fixedArray(64,Ot.u8()),Secp256r1:Ot.fixedArray(64,Ot.u8()),ZkLogin:Ot.vector(Ot.u8())}),Yt=Ot.enum("PublicKey",{ED25519:Ot.fixedArray(32,Ot.u8()),Secp256k1:Ot.fixedArray(33,Ot.u8()),Secp256r1:Ot.fixedArray(33,Ot.u8()),ZkLogin:Ot.vector(Ot.u8())}),Zt=Ot.struct("MultiSigPkMap",{pubKey:Yt,weight:Ot.u8()}),Xt=Ot.struct("MultiSigPublicKey",{pk_map:Ot.vector(Zt),threshold:Ot.u16()}),en=Ot.struct("MultiSig",{sigs:Ot.vector(Jt),bitmap:Ot.u16(),multisig_pk:Xt}),tn=Ot.vector(Ot.u8()).transform({input:e=>"string"==typeof e?g(e):e,output:e=>m(new Uint8Array(e))}),nn=Ot.struct("SenderSignedTransaction",{intentMessage:qt(Gt),txSignatures:Ot.vector(tn)}),rn=Ot.vector(nn,{name:"SenderSignedData"}),sn=Ot.struct("PasskeyAuthenticator",{authenticatorData:Ot.vector(Ot.u8()),clientDataJson:Ot.string(),userSignature:Ot.vector(Ot.u8())}),an=Ot.enum("PackageUpgradeError",{UnableToFetchPackage:Ot.struct("UnableToFetchPackage",{packageId:It}),NotAPackage:Ot.struct("NotAPackage",{objectId:It}),IncompatibleUpgrade:null,DigestDoesNotMatch:Ot.struct("DigestDoesNotMatch",{digest:Ot.vector(Ot.u8())}),UnknownUpgradePolicy:Ot.struct("UnknownUpgradePolicy",{policy:Ot.u8()}),PackageIDDoesNotMatch:Ot.struct("PackageIDDoesNotMatch",{packageId:It,ticketId:It})}),on=Ot.struct("ModuleId",{address:It,name:Ot.string()}),un=Ot.struct("MoveLocation",{module:on,function:Ot.u16(),instruction:Ot.u16(),functionName:Ot.option(Ot.string())}),cn=Ot.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:Ot.struct("IndexOutOfBounds",{idx:Ot.u16()}),SecondaryIndexOutOfBounds:Ot.struct("SecondaryIndexOutOfBounds",{resultIdx:Ot.u16(),secondaryIdx:Ot.u16()}),InvalidResultArity:Ot.struct("InvalidResultArity",{resultIdx:Ot.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),ln=Ot.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),dn=Ot.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:Ot.struct("MoveObjectTooBig",{objectSize:Ot.u64(),maxObjectSize:Ot.u64()}),MovePackageTooBig:Ot.struct("MovePackageTooBig",{objectSize:Ot.u64(),maxObjectSize:Ot.u64()}),CircularObjectOwnership:Ot.struct("CircularObjectOwnership",{object:It}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:Ot.option(un),MoveAbort:Ot.tuple([un,Ot.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:Ot.struct("CommandArgumentError",{argIdx:Ot.u16(),kind:cn}),TypeArgumentError:Ot.struct("TypeArgumentError",{argumentIdx:Ot.u16(),kind:ln}),UnusedValueWithoutDrop:Ot.struct("UnusedValueWithoutDrop",{resultIdx:Ot.u16(),secondaryIdx:Ot.u16()}),InvalidPublicFunctionReturnType:Ot.struct("InvalidPublicFunctionReturnType",{idx:Ot.u16()}),InvalidTransferObject:null,EffectsTooLarge:Ot.struct("EffectsTooLarge",{currentSize:Ot.u64(),maxSize:Ot.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:Ot.struct("PackageUpgradeError",{upgradeError:an}),WrittenObjectsTooLarge:Ot.struct("WrittenObjectsTooLarge",{currentSize:Ot.u64(),maxSize:Ot.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:Ot.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:Ot.vector(It)}),AddressDeniedForCoin:Ot.struct("AddressDeniedForCoin",{address:It,coinType:Ot.string()}),CoinTypeGlobalPause:Ot.struct("CoinTypeGlobalPause",{coinType:Ot.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),pn=Ot.enum("ExecutionStatus",{Success:null,Failed:Ot.struct("ExecutionFailed",{error:dn,command:Ot.option(Ot.u64())})}),hn=Ot.struct("GasCostSummary",{computationCost:Ot.u64(),storageCost:Ot.u64(),storageRebate:Ot.u64(),nonRefundableStorageFee:Ot.u64()}),fn=Ot.enum("Owner",{AddressOwner:It,ObjectOwner:It,Shared:Ot.struct("Shared",{initialSharedVersion:Ot.u64()}),Immutable:null}),gn=Ot.struct("TransactionEffectsV1",{status:pn,executedEpoch:Ot.u64(),gasUsed:hn,modifiedAtVersions:Ot.vector(Ot.tuple([It,Ot.u64()])),sharedObjects:Ot.vector(xt),transactionDigest:Et,created:Ot.vector(Ot.tuple([xt,fn])),mutated:Ot.vector(Ot.tuple([xt,fn])),unwrapped:Ot.vector(Ot.tuple([xt,fn])),deleted:Ot.vector(xt),unwrappedThenDeleted:Ot.vector(xt),wrapped:Ot.vector(xt),gasObject:Ot.tuple([xt,fn]),eventsDigest:Ot.option(Et),dependencies:Ot.vector(Et)}),yn=Ot.tuple([Ot.u64(),Et]),mn=Ot.enum("ObjectIn",{NotExist:null,Exist:Ot.tuple([yn,fn])}),bn=Ot.enum("ObjectOut",{NotExist:null,ObjectWrite:Ot.tuple([Et,fn]),PackageWrite:yn}),wn=Ot.enum("IDOperation",{None:null,Created:null,Deleted:null}),vn=Ot.struct("EffectsObjectChange",{inputState:mn,outputState:bn,idOperation:wn}),jn=Ot.enum("UnchangedSharedKind",{ReadOnlyRoot:yn,MutateDeleted:Ot.u64(),ReadDeleted:Ot.u64(),Cancelled:Ot.u64(),PerEpochConfig:null}),kn=Ot.struct("TransactionEffectsV2",{status:pn,executedEpoch:Ot.u64(),gasUsed:hn,transactionDigest:Et,gasObjectIndex:Ot.option(Ot.u32()),eventsDigest:Ot.option(Et),dependencies:Ot.vector(Et),lamportVersion:Ot.u64(),changedObjects:Ot.vector(Ot.tuple([It,vn])),unchangedSharedObjects:Ot.vector(Ot.tuple([It,jn])),auxDataDigest:Ot.option(Et)}),Sn=Ot.enum("TransactionEffects",{V1:gn,V2:kn}),Mn={...Ot,U8:Ot.u8(),U16:Ot.u16(),U32:Ot.u32(),U64:Ot.u64(),U128:Ot.u128(),U256:Ot.u256(),ULEB128:Ot.uleb128(),Bool:Ot.bool(),String:Ot.string(),Address:It,AppId:Kt,Argument:zt,CallArg:Tt,CompressedSignature:Jt,GasData:Wt,Intent:Qt,IntentMessage:qt,IntentScope:Ft,IntentVersion:Ht,MultiSig:en,MultiSigPkMap:Zt,MultiSigPublicKey:Xt,ObjectArg:Ct,ObjectDigest:Et,ProgrammableMoveCall:Dt,ProgrammableTransaction:Bt,PublicKey:Yt,SenderSignedData:rn,SenderSignedTransaction:nn,SharedObjectRef:Ut,StructTag:Rt,SuiObjectRef:xt,Command:Nt,TransactionData:Gt,TransactionDataV1:_t,TransactionExpiration:Vt,TransactionKind:Lt,TypeTag:Pt,TransactionEffects:Sn,PasskeyAuthenticator:sn},On=(BigInt(1e9),Se("0x6"),"0x2::sui::SUI");function In(e){if("string"==typeof e)switch(e){case"address":return Mn.Address;case"bool":return Mn.Bool;case"u8":return Mn.U8;case"u16":return Mn.U16;case"u32":return Mn.U32;case"u64":return Mn.U64;case"u128":return Mn.U128;case"u256":return Mn.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if("u8"===e.vector)return Mn.vector(Mn.U8).transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=In(e.vector);return t?Mn.vector(t):null}if("datatype"in e){const t=ke(e.datatype.package);if(t===ke("0x1")){if("ascii"===e.datatype.module&&"String"===e.datatype.type)return Mn.String;if("string"===e.datatype.module&&"String"===e.datatype.type)return Mn.String;if("option"===e.datatype.module&&"Option"===e.datatype.type){const t=In(e.datatype.typeParameters[0]);return t?Mn.vector(t):null}}if(t===ke("0x2")&&"object"===e.datatype.module&&"ID"===e.datatype.type)return Mn.Address}return null}function En(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:En(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(En)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}Se("0x5");async function xn(e,t,n){return await async function(e,t){const{inputs:n,commands:r}=e,i=[],s=new Set;r.forEach((t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map((t=>"Input"===t.$kind?e.inputs[t.Input]:null)).some((e=>e?.UnresolvedPure||e?.UnresolvedObject))){const e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;s.add(e),i.push(t.MoveCall)}}switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach((t=>{Un(t,Mn.U64,e)}));break;case"TransferObjects":Un(t.TransferObjects.address,Mn.Address,e)}}));const a=new Map;if(s.size>0){const e=An(t);await Promise.all([...s].map((async t=>{const[n,r,i]=t.split("::"),s=await e.getNormalizedMoveFunction({package:n,module:r,function:i});a.set(t,s.parameters.map((e=>function(e){return"object"==typeof e&&"Reference"in e?{ref:"&",body:En(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:En(e.MutableReference)}:{ref:null,body:En(e)}}(e))))})))}i.length&&await Promise.all(i.map((async e=>{const t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;const n=t.length>0&&function(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&ke(t.package)===ke("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=n}))),r.forEach((e=>{if(!e.MoveCall)return;const t=e.MoveCall,r=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${r}`);i.forEach(((e,r)=>{const i=t.arguments[r];if("Input"!==i.$kind)return;const s=n[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;const a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=In(e.body);if(o)return i.type="pure",void(n[n.indexOf(s)]=jt(o.serialize(a)));if("string"!=typeof a)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";const u=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;n[i.Input]=u}))}}))}(e,t),await async function(e,t){const n=e.inputs.filter((e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion))),r=[...new Set(n.map((e=>Se(e.UnresolvedObject.objectId))))],i=r.length?(u=r,Array.from({length:Math.ceil(u.length/50)},((e,t)=>u.slice(50*t,50*t+50)))):[],s=(await Promise.all(i.map((e=>An(t).multiGetObjects({ids:e,options:{showOwner:!0}}))))).flat(),a=new Map(r.map(((e,t)=>[e,s[t]]))),o=Array.from(a).filter((([e,t])=>t.error)).map((([e,t])=>JSON.stringify(t.error)));var u;if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=s.map((e=>{if(e.error||!e.data)throw new Error(`Failed to fetch object: ${e.error}`);const t=e.data.owner,n=t&&"object"==typeof t&&"Shared"in t?t.Shared.initial_shared_version:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:n}})),l=new Map(r.map(((e,t)=>[e,c[t]])));for(const[t,n]of e.inputs.entries()){if(!n.UnresolvedObject)continue;let r;const i=ke(n.UnresolvedObject.objectId),s=l.get(i);n.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?r=St({objectId:i,initialSharedVersion:n.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:Cn(e,t)}):Tn(e,t)&&(r=Mt({objectId:i,digest:n.UnresolvedObject.digest??s?.digest,version:n.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(n)]=r??kt({objectId:i,digest:n.UnresolvedObject.digest??s?.digest,version:n.UnresolvedObject.version??s?.version})}}(e,t),t.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=String(await An(t).getReferenceGasPrice()))}(e,t),await async function(e,t){if(e.gasConfig.budget)return;const n=await An(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(5e10),payment:[]}}})});if("success"!==n.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const r=1000n*BigInt(e.gasConfig.price||1n),i=BigInt(n.effects.gasUsed.computationCost)+r,s=i+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}(e,t),await async function(e,t){if(!e.gasConfig.payment){const n=(await An(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:On})).data.filter((t=>!e.inputs.find((e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)))).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!n.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=n.map((e=>we(Ue,e)))}}(e,t)),await function(e){e.inputs.forEach(((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)}))}(e),await n()}function Un(e,t,n){if("Input"!==e.$kind)return;const r=n.inputs[e.Input];"UnresolvedPure"===r.$kind&&(n.inputs[e.Input]=jt(t.serialize(r.UnresolvedPure.value)))}function Cn(e,t){let n=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n="&"!==t.MoveCall._argumentTypes[r].ref||n}"MakeMoveVec"!==t.$kind&&"MergeCoins"!==t.$kind&&"SplitCoins"!==t.$kind||(n=!0)})),n}function Tn(e,t){let n=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n=function(e){return"object"==typeof e.body&&"datatype"in e.body&&("0x2"===e.body.datatype.package&&"transfer"===e.body.datatype.module&&"Receiving"===e.body.datatype.type)}(t.MoveCall._argumentTypes[r])||n}})),n}function An(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function Pn(e){switch(e){case"u8":return Ot.u8();case"u16":return Ot.u16();case"u32":return Ot.u32();case"u64":return Ot.u64();case"u128":return Ot.u128();case"u256":return Ot.u256();case"bool":return Ot.bool();case"string":return Ot.string();case"id":case"address":return It}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,n]=t.slice(1);return"vector"===e?Ot.vector(Pn(n)):Ot.option(Pn(n))}throw new Error(`Invalid Pure type name: ${e}`)}function zn(e){function t(t,n){if("string"==typeof t)return e(Pn(t).serialize(n));if(t instanceof Uint8Array||B(t))return e(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(Mn.U8.serialize(t)),t.u16=t=>e(Mn.U16.serialize(t)),t.u32=t=>e(Mn.U32.serialize(t)),t.u64=t=>e(Mn.U64.serialize(t)),t.u128=t=>e(Mn.U128.serialize(t)),t.u256=t=>e(Mn.U256.serialize(t)),t.bool=t=>e(Mn.Bool.serialize(t)),t.string=t=>e(Mn.String.serialize(t)),t.address=t=>e(Mn.Address.serialize(t)),t.id=t.address,t.vector=(t,n)=>e(Mn.vector(Pn(t)).serialize(n)),t.option=(t,n)=>e(Mn.option(Pn(t)).serialize(n)),t}function Dn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Nn(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function $n(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Bn(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}const Ln=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function Vn(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const Rn=Ln?e=>e:e=>Vn(e);function Wn(e){for(let t=0;t<e.length;t++)e[t]=Vn(e[t])}function _n(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Nn(e),e}class Gn{clone(){return this._cloneInto()}}function Fn(e){const t=(t,n)=>e(n).update(_n(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}const Hn=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);class Kn extends Gn{constructor(e,t,n={},r,i,s){if(super(),this.blockLen=e,this.outputLen=t,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Dn(e),Dn(t),Dn(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");if(void 0!==n.key&&(n.key.length<1||n.key.length>r))throw new Error("key length must be undefined or 1.."+r);if(void 0!==n.salt&&n.salt.length!==i)throw new Error("salt must be undefined or "+i);if(void 0!==n.personalization&&n.personalization.length!==s)throw new Error("personalization must be undefined or "+s);this.buffer=new Uint8Array(e),this.buffer32=Bn(this.buffer)}update(e){$n(this);const{blockLen:t,buffer:n,buffer32:r}=this,i=(e=_n(e)).length,s=e.byteOffset,a=e.buffer;for(let o=0;o<i;){this.pos===t&&(Ln||Wn(r),this.compress(r,0,!1),Ln||Wn(r),this.pos=0);const u=Math.min(t-this.pos,i-o),c=s+o;if(u!==t||c%4||!(o+u<i))n.set(e.subarray(o,o+u),this.pos),this.pos+=u,this.length+=u,o+=u;else{const e=new Uint32Array(a,c,Math.floor((i-o)/4));Ln||Wn(e);for(let n=0;o+t<i;n+=r.length,o+=t)this.length+=t,this.compress(e,n,!1);Ln||Wn(e)}}return this}digestInto(e){$n(this),function(e,t){Nn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this);const{pos:t,buffer32:n}=this;this.finished=!0,this.buffer.subarray(t).fill(0),Ln||Wn(n),this.compress(n,0,!0),Ln||Wn(n);const r=Bn(e);this.get().forEach(((e,t)=>r[t]=Rn(e)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){const{buffer:t,length:n,finished:r,destroyed:i,outputLen:s,pos:a}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.length=n,e.finished=r,e.destroyed=i,e.outputLen=s,e.buffer.set(t),e.pos=a,e}}const Qn=BigInt(2**32-1),qn=BigInt(32);function Jn(e,t=!1){return t?{h:Number(e&Qn),l:Number(e>>qn&Qn)}:{h:0|Number(e>>qn&Qn),l:0|Number(e&Qn)}}const Yn={fromBig:Jn,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=Jn(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<qn|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},Zn=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Xn=new Uint32Array(32);function er(e,t,n,r,i,s){const a=i[s],o=i[s+1];let u=Xn[2*e],c=Xn[2*e+1],l=Xn[2*t],d=Xn[2*t+1],p=Xn[2*n],h=Xn[2*n+1],f=Xn[2*r],g=Xn[2*r+1],y=Yn.add3L(u,l,a);c=Yn.add3H(y,c,d,o),u=0|y,({Dh:g,Dl:f}={Dh:g^c,Dl:f^u}),({Dh:g,Dl:f}={Dh:Yn.rotr32H(g,f),Dl:Yn.rotr32L(g,f)}),({h,l:p}=Yn.add(h,p,g,f)),({Bh:d,Bl:l}={Bh:d^h,Bl:l^p}),({Bh:d,Bl:l}={Bh:Yn.rotrSH(d,l,24),Bl:Yn.rotrSL(d,l,24)}),Xn[2*e]=u,Xn[2*e+1]=c,Xn[2*t]=l,Xn[2*t+1]=d,Xn[2*n]=p,Xn[2*n+1]=h,Xn[2*r]=f,Xn[2*r+1]=g}function tr(e,t,n,r,i,s){const a=i[s],o=i[s+1];let u=Xn[2*e],c=Xn[2*e+1],l=Xn[2*t],d=Xn[2*t+1],p=Xn[2*n],h=Xn[2*n+1],f=Xn[2*r],g=Xn[2*r+1],y=Yn.add3L(u,l,a);c=Yn.add3H(y,c,d,o),u=0|y,({Dh:g,Dl:f}={Dh:g^c,Dl:f^u}),({Dh:g,Dl:f}={Dh:Yn.rotrSH(g,f,16),Dl:Yn.rotrSL(g,f,16)}),({h,l:p}=Yn.add(h,p,g,f)),({Bh:d,Bl:l}={Bh:d^h,Bl:l^p}),({Bh:d,Bl:l}={Bh:Yn.rotrBH(d,l,63),Bl:Yn.rotrBL(d,l,63)}),Xn[2*e]=u,Xn[2*e+1]=c,Xn[2*t]=l,Xn[2*t+1]=d,Xn[2*n]=p,Xn[2*n+1]=h,Xn[2*r]=f,Xn[2*r+1]=g}class nr extends Kn{constructor(e={}){super(128,void 0===e.dkLen?64:e.dkLen,e,64,16,16),this.v0l=0|Zn[0],this.v0h=0|Zn[1],this.v1l=0|Zn[2],this.v1h=0|Zn[3],this.v2l=0|Zn[4],this.v2h=0|Zn[5],this.v3l=0|Zn[6],this.v3h=0|Zn[7],this.v4l=0|Zn[8],this.v4h=0|Zn[9],this.v5l=0|Zn[10],this.v5h=0|Zn[11],this.v6l=0|Zn[12],this.v6h=0|Zn[13],this.v7l=0|Zn[14],this.v7h=0|Zn[15];const t=e.key?e.key.length:0;if(this.v0l^=this.outputLen|t<<8|65536|1<<24,e.salt){const t=Bn(_n(e.salt));this.v4l^=Rn(t[0]),this.v4h^=Rn(t[1]),this.v5l^=Rn(t[2]),this.v5h^=Rn(t[3])}if(e.personalization){const t=Bn(_n(e.personalization));this.v6l^=Rn(t[0]),this.v6h^=Rn(t[1]),this.v7l^=Rn(t[2]),this.v7h^=Rn(t[3])}if(e.key){const t=new Uint8Array(this.blockLen);t.set(_n(e.key)),this.update(t)}}get(){let{v0l:e,v0h:t,v1l:n,v1h:r,v2l:i,v2h:s,v3l:a,v3h:o,v4l:u,v4h:c,v5l:l,v5h:d,v6l:p,v6h:h,v7l:f,v7h:g}=this;return[e,t,n,r,i,s,a,o,u,c,l,d,p,h,f,g]}set(e,t,n,r,i,s,a,o,u,c,l,d,p,h,f,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|n,this.v1h=0|r,this.v2l=0|i,this.v2h=0|s,this.v3l=0|a,this.v3h=0|o,this.v4l=0|u,this.v4h=0|c,this.v5l=0|l,this.v5h=0|d,this.v6l=0|p,this.v6h=0|h,this.v7l=0|f,this.v7h=0|g}compress(e,t,n){this.get().forEach(((e,t)=>Xn[t]=e)),Xn.set(Zn,16);let{h:r,l:i}=Yn.fromBig(BigInt(this.length));Xn[24]=Zn[8]^i,Xn[25]=Zn[9]^r,n&&(Xn[28]=~Xn[28],Xn[29]=~Xn[29]);let s=0;const a=Hn;for(let n=0;n<12;n++)er(0,4,8,12,e,t+2*a[s++]),tr(0,4,8,12,e,t+2*a[s++]),er(1,5,9,13,e,t+2*a[s++]),tr(1,5,9,13,e,t+2*a[s++]),er(2,6,10,14,e,t+2*a[s++]),tr(2,6,10,14,e,t+2*a[s++]),er(3,7,11,15,e,t+2*a[s++]),tr(3,7,11,15,e,t+2*a[s++]),er(0,5,10,15,e,t+2*a[s++]),tr(0,5,10,15,e,t+2*a[s++]),er(1,6,11,12,e,t+2*a[s++]),tr(1,6,11,12,e,t+2*a[s++]),er(2,7,8,13,e,t+2*a[s++]),tr(2,7,8,13,e,t+2*a[s++]),er(3,4,9,14,e,t+2*a[s++]),tr(3,4,9,14,e,t+2*a[s++]);this.v0l^=Xn[0]^Xn[16],this.v0h^=Xn[1]^Xn[17],this.v1l^=Xn[2]^Xn[18],this.v1h^=Xn[3]^Xn[19],this.v2l^=Xn[4]^Xn[20],this.v2h^=Xn[5]^Xn[21],this.v3l^=Xn[6]^Xn[22],this.v3h^=Xn[7]^Xn[23],this.v4l^=Xn[8]^Xn[24],this.v4h^=Xn[9]^Xn[25],this.v5l^=Xn[10]^Xn[26],this.v5h^=Xn[11]^Xn[27],this.v6l^=Xn[12]^Xn[28],this.v6h^=Xn[13]^Xn[29],this.v7l^=Xn[14]^Xn[30],this.v7h^=Xn[15]^Xn[31],Xn.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rr=Fn((e=>new nr(e)));function ir(e){return ke(e).replace("0x","")}class sr{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=Mn.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return sr.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=Mn.TransactionData.parse(e),n=t?.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");return sr.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(e){return 2===e.version?new sr(we(Re,e)):new sr(we(Re,function(e){return we(Re,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map((e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()})))??null},inputs:e.inputs.map((e=>{if("Input"===e.kind){if(ee(Qe,e.value)){const t=we(Qe,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:m(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")})),commands:e.transactions.map((e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?Fe.tagToString(e.type.Some):null,elements:e.objects.map((e=>lt(e)))}};case"MergeCoins":return{MergeCoins:{destination:lt(e.destination),sources:e.sources.map((e=>lt(e)))}};case"MoveCall":{const[t,n,r]=e.target.split("::");return{MoveCall:{package:t,module:n,function:r,typeArguments:e.typeArguments,arguments:e.arguments.map((e=>lt(e)))}}}case"Publish":return{Publish:{modules:e.modules.map((e=>m(Uint8Array.from(e)))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:lt(e.coin),amounts:e.amounts.map((e=>lt(e)))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map((e=>lt(e))),address:lt(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map((e=>m(Uint8Array.from(e)))),dependencies:e.dependencies,package:e.packageId,ticket:lt(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)}))})}(e)))}static getDigestFromBytes(e){const t=function(e,t){const n=Array.from("TransactionData::").map((e=>e.charCodeAt(0))),r=new Uint8Array(n.length+t.length);return r.set(n),r.set(t,n.length),rr(r,{dkLen:32})}(0,e);return w(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:n}={}){const r=this.inputs,i=this.commands,s={ProgrammableTransaction:{inputs:r,commands:i}};if(n)return Mn.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=t?.expiration??this.expiration,o=t?.sender??this.sender,u={...this.gasData,...t?.gasConfig,...t?.gasData};if(!o)throw new Error("Missing transaction sender");if(!u.budget)throw new Error("Missing gas budget");if(!u.payment)throw new Error("Missing gas payment");if(!u.price)throw new Error("Missing gas price");const c={sender:ir(o),expiration:a||{None:!0},gasData:{payment:u.payment,owner:ir(this.gasData.owner??o),price:BigInt(u.price),budget:BigInt(u.budget)},kind:{ProgrammableTransaction:{inputs:r,commands:i}}};return Mn.TransactionData.serialize({V1:c},{maxSize:e}).toBytes()}addInput(e,t){const n=this.inputs.length;return this.inputs.push(t),{Input:n,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments(((n,r)=>("Input"===n.$kind&&n.Input===e&&t(n,r),n)))}mapArguments(e){for(const t of this.commands)switch(t.$kind){case"MoveCall":t.MoveCall.arguments=t.MoveCall.arguments.map((n=>e(n,t)));break;case"TransferObjects":t.TransferObjects.objects=t.TransferObjects.objects.map((n=>e(n,t))),t.TransferObjects.address=e(t.TransferObjects.address,t);break;case"SplitCoins":t.SplitCoins.coin=e(t.SplitCoins.coin,t),t.SplitCoins.amounts=t.SplitCoins.amounts.map((n=>e(n,t)));break;case"MergeCoins":t.MergeCoins.destination=e(t.MergeCoins.destination,t),t.MergeCoins.sources=t.MergeCoins.sources.map((n=>e(n,t)));break;case"MakeMoveVec":t.MakeMoveVec.elements=t.MakeMoveVec.elements.map((n=>e(n,t)));break;case"Upgrade":t.Upgrade.ticket=e(t.Upgrade.ticket,t);break;case"$Intent":const n=t.$Intent.inputs;t.$Intent.inputs={};for(const[r,i]of Object.entries(n))t.$Intent.inputs[r]=Array.isArray(i)?i.map((n=>e(n,t))):e(i,t);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${t.$kind}`)}}replaceCommand(e,t){if(!Array.isArray(t))return void(this.commands[e]=t);const n=t.length-1;this.commands.splice(e,1,...t),0!==n&&this.mapArguments((t=>{switch(t.$kind){case"Result":t.Result>e&&(t.Result+=n);break;case"NestedResult":t.NestedResult[0]>e&&(t.NestedResult[0]+=n)}return t}))}getDigest(){const e=this.build({onlyTransactionKind:!1});return sr.getDigestFromBytes(e)}snapshot(){return we(Re,this)}}function ar(e){return"string"==typeof e?ke(e):e.Object?e.Object.ImmOrOwnedObject?ke(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?ke(e.Object.Receiving.objectId):ke(e.Object.SharedObject.objectId):e.UnresolvedObject?ke(e.UnresolvedObject.objectId):void 0}var or,ur,cr,lr,dr,pr,hr,fr,gr,yr=e=>{throw TypeError(e)},mr=(e,t,n)=>t.has(e)||yr("Cannot "+n),br=(e,t,n)=>(mr(e,t,"read from private field"),n?n.call(e):t.get(e)),wr=(e,t,n)=>t.has(e)?yr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vr=(e,t,n,r)=>(mr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),jr=(e,t,n)=>(mr(e,t,"access private method"),n);function kr(e,t=1/0){const n=[],r=t=>n[t]??(n[t]={$kind:"NestedResult",NestedResult:[e,t]});return new Proxy({$kind:"Result",Result:e},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,n){if(n in e)return Reflect.get(e,n);if(n===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield r(e),e++};if("symbol"==typeof n)return;const i=parseInt(n,10);return Number.isNaN(i)||i<0?void 0:r(i)}})}const Sr=Symbol.for("@mysten/transaction"),Mr={buildPlugins:new Map,serializationPlugins:new Map},Or=Symbol.for("@mysten/transaction/registry");function Ir(){try{const e=globalThis;return e[Or]||(e[Or]=Mr),e[Or]}catch(e){return Mr}}or=new WeakMap,ur=new WeakMap,cr=new WeakMap,lr=new WeakMap,dr=new WeakSet,pr=function(e){return B(e)?this.pure(e):jr(this,dr,hr).call(this,e)},hr=function(e){return we(Ce,"function"==typeof e?e(this):e)},fr=async function(e){if(!e.onlyTransactionKind&&!br(this,lr).sender)throw new Error("Missing transaction sender");await jr(this,dr,gr).call(this,[...br(this,ur),xn],e)},gr=async function(e,t){const n=r=>{if(r>=e.length)return()=>{};const i=e[r];return async()=>{const e=n(r+1);let s=!1,a=!1;if(await i(br(this,lr),t,(async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);s=!0,await e(),a=!0})),!s)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await n(0)()};let Er=class e{constructor(){wr(this,dr),wr(this,or),wr(this,ur),wr(this,cr,new Map),wr(this,lr),this.object=function(e){function t(t){return e(t)}return t.system=()=>t("0x5"),t.clock=()=>t("0x6"),t.random=()=>t("0x8"),t.denyList=()=>t("0x403"),t.option=({type:e,value:t})=>n=>n.moveCall({typeArguments:[e],target:"0x1::option::"+(null===t?"none":"some"),arguments:null===t?[]:[n.object(t)]}),t}((e=>{if("function"==typeof e)return this.object(e(this));if("object"==typeof e&&ee(Ce,e))return e;const t=ar(e),n=br(this,lr).inputs.find((e=>t===ar(e)));return n?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||e.Object.SharedObject.mutable),n?{$kind:"Input",Input:br(this,lr).inputs.indexOf(n),type:"object"}:br(this,lr).addInput("object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ke(e)}}:e)}));const e=Ir();vr(this,lr,new sr),vr(this,ur,[...e.buildPlugins.values()]),vr(this,or,[...e.serializationPlugins.values()])}static fromKind(t){const n=new e;return vr(n,lr,sr.fromKindBytes("string"==typeof t?g(t):t)),n}static from(t){const n=new e;var r;return(r=t)&&"object"==typeof r&&!0===r[Sr]?vr(n,lr,new sr(t.getData())):"string"==typeof t&&t.startsWith("{")?vr(n,lr,sr.restore(JSON.parse(t))):vr(n,lr,sr.fromBytes("string"==typeof t?g(t):t)),n}static registerGlobalSerializationPlugin(e,t){Ir().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){Ir().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){Ir().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){Ir().buildPlugins.delete(e)}addSerializationPlugin(e){br(this,or).push(e)}addBuildPlugin(e){br(this,ur).push(e)}addIntentResolver(e,t){if(br(this,cr).has(e)&&br(this,cr).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);br(this,cr).set(e,t)}setSender(e){br(this,lr).sender=e}setSenderIfNotSet(e){br(this,lr).sender||(br(this,lr).sender=e)}setExpiration(e){br(this,lr).expiration=e?we(Ve,e):null}setGasPrice(e){br(this,lr).gasConfig.price=String(e)}setGasBudget(e){br(this,lr).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==br(this,lr).gasData.budget&&(br(this,lr).gasConfig.budget=String(e))}setGasOwner(e){br(this,lr).gasConfig.owner=e}setGasPayment(e){br(this,lr).gasConfig.payment=e.map((e=>we(Ue,e)))}get blockData(){return ut(br(this,lr).snapshot())}getData(){return br(this,lr).snapshot()}get[Sr](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:zn((e=>B(e)?br(this,lr).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):br(this,lr).addInput("pure",ee(Le,e)?we(Le,e):e instanceof Uint8Array?jt(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}})))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(kt(...e))}receivingRef(...e){return this.object(Mt(...e))}sharedObjectRef(...e){return this.object(St(...e))}add(e){return"function"==typeof e?e(this):kr(br(this,lr).commands.push(e)-1)}splitCoins(e,t){const n=We.SplitCoins("string"==typeof e?this.object(e):jr(this,dr,hr).call(this,e),t.map((e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):jr(this,dr,pr).call(this,e))));return kr(br(this,lr).commands.push(n)-1,t.length)}mergeCoins(e,t){return this.add(We.MergeCoins(this.object(e),t.map((e=>this.object(e)))))}publish({modules:e,dependencies:t}){return this.add(We.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:n,ticket:r}){return this.add(We.Upgrade({modules:e,dependencies:t,package:n,ticket:this.object(r)}))}moveCall({arguments:e,...t}){return this.add(We.MoveCall({...t,arguments:e?.map((e=>jr(this,dr,pr).call(this,e)))}))}transferObjects(e,t){return this.add(We.TransferObjects(e.map((e=>this.object(e))),"string"==typeof t?this.pure.address(t):jr(this,dr,pr).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(We.MakeMoveVec({type:e,elements:t.map((e=>this.object(e)))}))}serialize(){return JSON.stringify(ut(br(this,lr).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(we(vt,br(this,lr).snapshot()),((e,t)=>"bigint"==typeof t?t.toString():t),2)}async sign(e){const{signer:t,...n}=e,r=await this.build(n);return t.signTransaction(r)}async build(e={}){return await this.prepareForSerialization(e),await jr(this,dr,fr).call(this,e),br(this,lr).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await jr(this,dr,fr).call(this,e),br(this,lr).getDigest()}async prepareForSerialization(e){const t=new Set;for(const e of br(this,lr).commands)e.$Intent&&t.add(e.$Intent.name);const n=[...br(this,or)];for(const r of t)if(!e.supportedIntents?.includes(r)){if(!br(this,cr).has(r))throw new Error(`Missing intent resolver for ${r}`);n.push(br(this,cr).get(r))}await jr(this,dr,gr).call(this,n,e)}};const xr="sui:mainnet";var Ur,Cr,Tr,Ar,Pr,zr,Dr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Nr=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class $r{get address(){return Dr(this,Ur,"f")}get publicKey(){return Dr(this,Cr,"f").slice()}get chains(){return Dr(this,Tr,"f").slice()}get features(){return Dr(this,Ar,"f").slice()}get label(){return Dr(this,Pr,"f")}get icon(){return Dr(this,zr,"f")}constructor(e){Ur.set(this,void 0),Cr.set(this,void 0),Tr.set(this,void 0),Ar.set(this,void 0),Pr.set(this,void 0),zr.set(this,void 0),new.target===$r&&Object.freeze(this),Nr(this,Ur,e.address,"f"),Nr(this,Cr,e.publicKey.slice(),"f"),Nr(this,Tr,e.chains.slice(),"f"),Nr(this,Ar,e.features.slice(),"f"),Nr(this,Pr,e.label,"f"),Nr(this,zr,e.icon,"f")}}Ur=new WeakMap,Cr=new WeakMap,Tr=new WeakMap,Ar=new WeakMap,Pr=new WeakMap,zr=new WeakMap;const Br=be("type",[ce({type:se("connect")}),ce({type:se("sign-transaction-block"),data:pe("`data` is required"),address:pe("`address` is required")}),ce({type:se("sign-personal-message"),bytes:pe("`bytes` is required"),address:pe("`address` is required")})]),Lr=(ce({id:ve(pe("`id` is required"),Z()),origin:ve(pe(),function e(t){return{kind:"validation",type:"url",reference:e,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&H(this,"URL",e,t),e}}}("`origin` must be a valid URL")),name:le(pe()),payload:Br}),be("type",[ce({type:se("connect"),address:pe()}),ce({type:se("sign-transaction-block"),bytes:pe(),signature:pe()}),ce({type:se("sign-personal-message"),bytes:pe(),signature:pe()})])),Vr=be("type",[ce({type:se("reject")}),ce({type:se("resolve"),data:Lr})]),Rr=ce({id:ve(pe(),Z()),source:se("zksend-channel"),payload:Vr});var Wr,_r,Gr,Fr,Hr,Kr,Qr,qr,Jr,Yr,Zr,Xr,ei=e=>{throw TypeError(e)},ti=(e,t,n)=>t.has(e)||ei("Cannot "+n),ni=(e,t,n)=>(ti(e,t,"read from private field"),n?n.call(e):t.get(e)),ri=(e,t,n)=>t.has(e)?ei("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ii=(e,t,n,r)=>(ti(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),si=(e,t,n)=>(ti(e,t,"access private method"),n);const ai="https://getstashed.com";class oi{constructor({name:e,network:t,origin:n=ai}){ri(this,Zr),ri(this,Wr),ri(this,_r),ri(this,Gr),ri(this,Fr),ri(this,Hr),ri(this,Kr),ri(this,Qr),ri(this,qr),ri(this,Jr,null),ri(this,Yr,(e=>{if(e.origin!==ni(this,Gr))return;const{success:t,output:n}=function(e,t,n){const r=e._run({typed:!1,value:t},G(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}(Rr,e.data);t&&n.id===ni(this,_r)&&(si(this,Zr,Xr).call(this),"reject"===n.payload.type?ni(this,qr).call(this,new Error("User rejected the request")):"resolve"===n.payload.type&&ni(this,Qr).call(this,n.payload.data))}));const r=window.open("about:blank","_blank");if(!r)throw new Error("Failed to open new window");ii(this,Wr,r),ii(this,_r,crypto.randomUUID()),ii(this,Gr,n),ii(this,Fr,e),ii(this,Hr,t);const{promise:i,resolve:s,reject:a}=function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),reject:t,resolve:e}}();ii(this,Kr,i),ii(this,Qr,s),ii(this,qr,a),ii(this,Jr,setInterval((()=>{try{ni(this,Wr).closed&&(si(this,Zr,Xr).call(this),a(new Error("User closed the Stashed window")))}catch{}}),1e3))}send({type:e,...t}){return window.addEventListener("message",ni(this,Yr)),ni(this,Wr).location.assign(`${ni(this,Gr)}/dapp/${e}?${new URLSearchParams({id:ni(this,_r),origin:window.origin,network:ni(this,Hr),name:ni(this,Fr)})}${t?`#${new URLSearchParams(t)}`:""}`),ni(this,Kr)}close(){si(this,Zr,Xr).call(this),ni(this,Wr).close()}}Wr=new WeakMap,_r=new WeakMap,Gr=new WeakMap,Fr=new WeakMap,Hr=new WeakMap,Kr=new WeakMap,Qr=new WeakMap,qr=new WeakMap,Jr=new WeakMap,Yr=new WeakMap,Zr=new WeakSet,Xr=function(){ni(this,Jr)&&(clearInterval(ni(this,Jr)),ii(this,Jr,null)),window.removeEventListener("message",ni(this,Yr))},new WeakMap;var ui,ci,li,di,pi,hi,fi,gi,yi,mi,bi,wi,vi,ji=e=>{throw TypeError(e)},ki=(e,t,n)=>t.has(e)||ji("Cannot "+n),Si=(e,t,n)=>(ki(e,t,"read from private field"),n?n.call(e):t.get(e)),Mi=(e,t,n)=>t.has(e)?ji("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Oi=(e,t,n,r)=>(ki(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ii=(e,t,n)=>(ki(e,t,"access private method"),n);const Ei="stashed:recentAddress";class xi{constructor({name:e,network:t,address:n,origin:r=ai}){var i;Mi(this,mi),Mi(this,ui),Mi(this,ci),Mi(this,li),Mi(this,di),Mi(this,pi),Mi(this,hi,(async({transactionBlock:e,account:t})=>{e.setSenderIfNotSet(t.address);const n=e.serialize(),r=new oi({name:Si(this,di),origin:Si(this,li),network:Si(this,pi)}),i=await r.send({type:"sign-transaction-block",data:n,address:t.address});return{transactionBlockBytes:i.bytes,signature:i.signature}})),Mi(this,fi,(async({transaction:e,account:t})=>{const n=new oi({name:Si(this,di),origin:Si(this,li),network:Si(this,pi)}),r=Er.from(await e.toJSON());r.setSenderIfNotSet(t.address);const i=r.serialize(),s=await n.send({type:"sign-transaction-block",data:i,address:t.address});return{bytes:s.bytes,signature:s.signature}})),Mi(this,gi,(async({message:e,account:t})=>{const n=new oi({name:Si(this,di),origin:Si(this,li),network:Si(this,pi)}),r=m(e);return{bytes:r,signature:(await n.send({type:"sign-personal-message",bytes:r,address:t.address})).signature}})),Mi(this,yi,((e,t)=>(Si(this,ui).on(e,t),()=>Si(this,ui).off(e,t)))),Mi(this,wi,(async e=>{if(e?.silent){const e=localStorage.getItem(Ei);return e&&Ii(this,mi,bi).call(this,e),{accounts:this.accounts}}const t=new oi({name:Si(this,di),origin:Si(this,li),network:Si(this,pi)}),n=await t.send({type:"connect"});if(!("address"in n))throw new Error("Unexpected response");return Ii(this,mi,bi).call(this,n.address),{accounts:this.accounts}})),Mi(this,vi,(async()=>{localStorage.removeItem(Ei),Ii(this,mi,bi).call(this)})),Oi(this,ci,[]),Oi(this,ui,{all:i=i||new Map,on:function(e,t){var n=i.get(e);n?n.push(t):i.set(e,[t])},off:function(e,t){var n=i.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):i.set(e,[]))},emit:function(e,t){var n=i.get(e);n&&n.slice().map((function(e){e(t)})),(n=i.get("*"))&&n.slice().map((function(n){n(e,t)}))}}),Oi(this,li,r),Oi(this,di,e),Oi(this,pi,t),n&&Ii(this,mi,bi).call(this,n)}get name(){return"Stashed"}get icon(){return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjU0IiBoZWlnaHQ9IjU0IiB4PSIxIiB5PSIxIiBmaWxsPSIjNTE5REU5IiByeD0iMjciLz48cmVjdCB3aWR0aD0iNTQiIGhlaWdodD0iNTQiIHg9IjEiIHk9IjEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMjciLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTguMzUzIDM1LjA2NGMuOTIxIDMuNDM4IDQuMzYzIDYuNTUxIDExLjQ4MyA0LjY0NCA2Ljc5NC0xLjgyMSAxMS4wNTItNy40MSA5Ljk0OC0xMS41My0uMzgxLTEuNDIzLTEuNTMtMi4zODctMy4zLTIuMjNsLTE1LjgzMiAxLjMyYy0uOTk3LjA3Ni0xLjQ1NC0uMDg4LTEuNzE4LS43MTYtLjI1Ni0uNTk5LS4xMS0xLjI0MSAxLjA5NC0xLjg1bDEyLjA0OC02LjE4M2MuOTI0LS40NyAxLjUzOS0uNjY2IDIuMTAxLS40NjguMzUyLjEyOC41ODQuNjM4LjM3MSAxLjI2N2wtLjc4MSAyLjMwNmMtLjk1OSAyLjgzIDEuMDk0IDMuNDg4IDIuMjUgMy4xNzggMS43NTEtLjQ2OSAyLjE2My0yLjEzNiAxLjU5OS00LjI0LTEuNDMtNS4zMzctNy4wOS02LjE3LTEyLjIyMy00Ljc5Ni01LjIyMiAxLjQtOS43NDggNS42My04LjM2NiAxMC43ODkuMzI1IDEuMjE1IDEuNDQ0IDIuMTg2IDIuNzQgMi4xNTdsMS45NzgtLjAwNWMuNDA3LS4wMS4yNi4wMjQgMS4wNDYtLjA0MS43ODQtLjA2NSAyLjg4LS4zMjMgMi44OC0uMzIzbDEwLjI4Ni0xLjE2NC4yNjUtLjAzOGMuNjAyLS4xMDMgMS4wNTYuMDUzIDEuNDQuNzE1LjU3Ni45OTEtLjMwMiAxLjczOC0xLjM1MiAyLjYzM2wtLjA4NS4wNzItOS4wNDEgNy43OTJjLTEuNTUgMS4zMzctMi42MzkuODM0LTMuMDItLjU4OWwtMS4zNS01LjA0Yy0uMzM0LTEuMjQ0LTEuNTUtMi4yMjEtMi45NzQtMS44NC0xLjc4LjQ3Ny0xLjkyNCAyLjU1LTEuNDg3IDQuMThaIi8+PC9zdmc+Cg=="}get version(){return"1.0.0"}get chains(){return[xr]}get accounts(){return Si(this,ci)}get features(){return{"standard:connect":{version:"1.0.0",connect:Si(this,wi)},"standard:disconnect":{version:"1.0.0",disconnect:Si(this,vi)},"standard:events":{version:"1.0.0",on:Si(this,yi)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:Si(this,hi)},"sui:signTransaction":{version:"2.0.0",signTransaction:Si(this,fi)},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:Si(this,gi)}}}}ui=new WeakMap,ci=new WeakMap,li=new WeakMap,di=new WeakMap,pi=new WeakMap,hi=new WeakMap,fi=new WeakMap,gi=new WeakMap,yi=new WeakMap,mi=new WeakSet,bi=function(e){e?(Oi(this,ci,[new $r({address:e,chains:[xr],features:["sui:signTransactionBlock","sui:signPersonalMessage"],publicKey:new Uint8Array})]),localStorage.setItem(Ei,e)):Oi(this,ci,[]),Si(this,ui).emit("change",{accounts:this.accounts})},wi=new WeakMap,vi=new WeakMap,function(e,{origin:t,network:n="mainnet"}={}){const r=a();let i=null;try{const e=new URLSearchParams(window.location.search);i=e.get("stashed_address")||e.get("zksend_address")}catch{}const s=new xi({name:e,network:n,origin:t,address:i});r.register(s)}("Stashed");let Ui,Ci=[];async function Ti(){return 0===Ci.length&&(Ci=await async function(){return Array.from(a().get())}()),Ci}async function Ai(e){return(await Ti()).find((t=>t.name===e))}async function Pi(){try{return(await Ti()).map((e=>e.name))}catch(e){return console.error("Error loading wallets:",e),[]}}async function zi(e){try{const t=await async function(e){return null==Ui&&(Ui=await async function(e){try{const t=(await Ai(e)).features[h],n=await t.connect();return Ui=n.accounts[0],Ui}catch(e){console.error("Connection failed:",e)}}(e)),Ui}(e);return t?.address??""}catch(e){return console.error("Connection failed:",e),""}}async function Di(e){try{const t=await Ai(e);if(null==t)return;const n=t.features[f];await n.disconnect(),Ui=void 0,Ci=[]}catch(e){return void console.error("Disconnect failed:",e)}}async function Ni(e,t){if(!t)return"";const n=await Ai(e);if(null==n)return"";try{const e=n.features[h],r=await e.connect(),i=n.features["sui:signPersonalMessage"];return(await i.signPersonalMessage({message:(new TextEncoder).encode(t),account:r.accounts[0]})).signature}catch(e){return console.error("Signing failed:",e),""}}window.bridge={connectWallet:zi,disconnectWallet:Di,signMessage:Ni,loadWallets:Pi},window.WalletBridge=t;